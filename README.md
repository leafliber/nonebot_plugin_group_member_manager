# nonebot_plugin_group_member_manager

一个功能强大的 NoneBot2 群成员管理插件，支持群聊绑定、活跃度检查、白名单管理等功能。

## 功能特性

- 🔗 **群聊绑定**: 将当前群绑定到要管理的目标群
- 📊 **活跃度检查**: 根据设定的月数检查群成员活跃度
- ⚪ **白名单管理**: 将特定成员加入白名单，避免误删
- 🗑️ **批量清理**: 自动删除不活跃的群成员
- 💾 **数据持久化**: 使用JSON文件存储配置和白名单数据

## 安装

```bash
pip install nonebot-plugin-group-member-manager
```

或使用 poetry：

```bash
poetry add nonebot-plugin-group-member-manager
```

## 配置

在 `.env` 文件中加载插件：

```
INSTALLED_PLUGINS=["nonebot_plugin_group_member_manager"]
```

## 使用指南

### 权限说明
所有命令仅限 **SUPERUSER**（超级用户）使用。

### 命令列表

#### 1. gmm绑定主群 [群号]
将当前群绑定到要管理的目标群。

**示例：**
```
gmm绑定主群 123456789
```

#### 2. gmm取消绑定
取消当前群的绑定关系，同时清空对应的白名单。

**示例：**
```
gmm取消绑定
```

#### 3. gmm设定不活跃月数 [数字]
设定绑定群聊的不活跃判定月数。

**示例：**
```
gmm设定不活跃月数 6
```

#### 4. gmm查看不活跃成员
查看绑定群聊中的不活跃成员，显示姓名和QQ号。
- 每条消息最多显示10人
- 多条消息间隔2-5秒发送
- 自动跳过管理员和白名单用户

**示例：**
```
gmm查看不活跃成员
```

#### 5. gmm设定白名单 [QQ号]
将指定QQ号的成员加入白名单，不会出现在不活跃成员列表中。

**示例：**
```
gmm设定白名单 987654321
```

#### 6. gmm删除不活跃成员
删除绑定群聊中的所有不活跃成员。
- 自动跳过管理员和白名单用户
- 显示删除统计信息

**示例：**
```
gmm删除不活跃成员
```

## 数据存储

插件数据存储在 `data/nonebot_plugin_group_member_manager/data.json`，包含：

```json
{
  "bindings": {
    "当前群号": {
      "target_group": "目标群号",
      "inactive_months": 6
    }
  },
  "whitelist": {
    "群号": ["QQ号1", "QQ号2"]
  }
}
```

## 注意事项

1. 确保机器人在目标群中具有管理员权限
2. 白名单用户和群管理员不会被删除
3. 删除操作不可撤销，请谨慎使用
4. 建议先使用"查看不活跃成员"确认名单后再执行删除

## 许可证

本项目采用 MIT 许可证。详细信息请查看 [LICENSE](LICENSE) 文件。

## 贡献

欢迎提交 Issue 和 Pull Request！

## 更新日志

### v1.0.0
- 初始版本发布
- 支持群聊绑定和解绑
- 支持活跃度检查和批量删除
- 支持白名单管理功能